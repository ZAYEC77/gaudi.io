---
layout: default
title: "Configuration"
description: ""
body: configuration
---

<div class="container page">

    <h1>Configuration</h1>

    <p>After changing your configuration, you should restart gaudi with the <code>rebuild</code> argument:</p>

    <code>gaudi rebuild</code>

    <h2>Common Configuration</h2>

    <p>The YML file describing the architecture should have a section called <code>applications</code>.</p>

    <h3>Type</h3>

    <p>You can specify what kind of application you want to run:</p>
    <script src="https://gist.github.com/DaphDaOne/2ac33a722b5b4f168880.js"></script>

    <p>Application types are listed below.</p>

    <h3>Links</h3>

    <p>When an application depends on another, you can link them together:</p>
    <script src="https://gist.github.com/DaphDaOne/86dcdd33beae9190b662.js"></script>

    <p>Here the <code>app1</code> application receives environment variables for each link, as follows:</p>
    <script src="https://gist.github.com/DaphDaOne/46793b89820b3a8111e1.js"></script>

    <h3>Ports</h3>

    <p>To open some ports on an application:</p>
    <script src="https://gist.github.com/DaphDaOne/2cbefdf5c1a455fd6d3b.js"></script>

    <p>The port 80 in the host machine will be mapped to the 8080 in the container.</p>

    <h3>Volumes</h3>

    <p>You can add you own folders by mounting volumes:</p>
    <script src="https://gist.github.com/DaphDaOne/7c4f3faa3c02cb3ea994.js"></script>

    <p>The <code>php/</code> folder (absolute or relative to the yml file) will be mounted in the <code>/app/php</code> folder in the application.</p>

    <h3>Environment variables</h3>

    <p>Environment variables can be injected with the <code>environments</code> field:</p>
    <script src="https://gist.github.com/DaphDaOne/e3c31534c123d61c1039.js"></script>

    <p>Environment variable will be set thanks to the docker's <code>-e</code> argument.</p>

    <h3>Apt packets</h3>

    <p>If you want to install other apt packets, use the <code>apt_get</code> parameter:</p>
    <script src="https://gist.github.com/DaphDaOne/af6760f33b5b69d9f1db.js"></script>

    <h3>Add files into container</h3>

    <p>
        Files can be added directly into the container with the <code>add</code> parameter.
        Contrary to <code>volumes</code>, <code>add</code> can only be used for files.
    </p>
    <script src="https://gist.github.com/DaphDaOne/14027380b13c34b663d0.js"></script>

    <p><code>add</code> takes a map of <code>relative file on the host machine</code>: <code>destination path on the container</code>.</p>

    <h3>Remote Containers</h3>

    <p>If you want to run an application not yet supported by gaudi, you can use a prebuilt image (on Github), or an image from the <a href="https://index.docker.io/">Docker index</a>:</p>

    <p>Github images can be pulled via the <code>github</code> type:
    <script src="https://gist.github.com/DaphDaOne/3d715eeb46fffe20ebbf.js"></script>

    <p>Images from Docker index uses the <code>index</code> type:</p>
    <script src="https://gist.github.com/DaphDaOne/b003b39ef9066e926a2b.js"></script>

    <h3>Before and after scripts</h3>

    <p>Each type of application listed bellow can be configured with <code>before_script</code> and <code>after_script</code> field.
        Theses fields can represents a file path or a command. They are executed before or after the main executable of the application.</p>

    <p>Example: Start a node server</p>
    <script src="https://gist.github.com/DaphDaOne/92fa9190d0e5ece2622a.js"></script>

    <p>Before scripts can added to run custom script before the application boots:</p>
    <script src="https://gist.github.com/DaphDaOne/b67246f98ce66af526a2.js"></script>


</div>
